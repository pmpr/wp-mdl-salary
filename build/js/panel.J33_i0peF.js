(()=>{"use strict";const t="calculateIncomes",e="submitWithdraw",a="fetchWithdraw",s="fetchWithdrawFields",n="setWithdrawFields",r="/pmpr/v1/salary/withdraw",l={[n](t,e){t.fields=e}},i={state:{fields:null},actions:{[e](t,e){return this._vm.$helper.$apiRequest(`${r}/submit`,e)},[t](t,e){return this._vm.$helper.$apiRequest(`${r}/calculate`,e)},[a](t,e){return this._vm.$helper.$apiRequest(`${r}/get-withdraw`,e,"$get")},[s]({commit:t,state:e}){return new Promise(((e,a)=>{this._vm.$api.$get(`${r}/get-fields`).then((a=>{t(n,a.data),e(a.data)})).catch((({response:t})=>{a(t)}))}))}},mutations:l,getters:{}},o="fetchRequest",c="fetchAgreement",u="fetchStepsData",d="submitApplyRequest",m="fetchPaymentFields",p="setSteps",h="setRequest",_="setAgreement",w="setPaymentFields",y="/pmpr/v1/salary/agreement",f={[p](t,e){t.steps=e},[h](t,e){t.request=e},[_](t,e){t.agreement=e},[w](t,e){t.paymentFields=e}},g={state:{steps:null,request:null,agreement:null,paymentFields:null},actions:{[u]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${y}/get-apply-steps`,{params:e}).then((e=>{t(p,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[m]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${y}/get-payment-fields`,{params:e}).then((e=>{t(w,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[u]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${y}/get-apply-steps`,{params:e}).then((e=>{t(p,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[d]({commit:t,state:e},a){return new Promise(((t,e)=>{this._vm.$api.$post(`${y}/submit-apply`,a).then((e=>{t(e.data)})).catch((({response:t})=>{e(t)}))}))},[o]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${y}/get-request`,{params:e}).then((e=>{t(h,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[c]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${y}/get-agreement`,{params:e}).then((e=>{t(_,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))}},mutations:f},v="fetchBankAccountFields",P="deleteBankAccount",b="saveBankAccount",S="setBankAccountFields",$="/pmpr/v1/salary/bank-account",x={[S](t,e){t.fields=e}},k={state:{fields:null},actions:{[b](t,e){return this._vm.$helper.$apiRequest(`${$}/save`,e)},[P](t,e){return this._vm.$helper.$apiRequest(`${$}/delete`,e,"$delete")},[v]({commit:t,state:e}){return new Promise(((e,a)=>{this._vm.$api.$get(`${$}/get-fields`).then((a=>{t(S,a.data),e(a.data)})).catch((({response:t})=>{a(t)}))}))}},mutations:x,getters:{}};PRHelper.getHook().addFilter("panel_store_modules",(t=>(t["salary-back-account"]=k,t["salary-agreement"]=g,t["salary-withdraw"]=i,t)),500);var C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._b({},"div",t.container,!1),[a("PanelIcon",{attrs:{icon:t.account.icon,size:"full",color:"no-color"}}),t._v(" "),a("div",{staticClass:"d-flex flex-column my-auto ml-3"},[a("strong",{staticClass:"mb-1"},[t._v(t._s(t.account.bank))]),t._v(" "),a("span",{staticClass:"text-dark-50"},[t._v(t._s(t.account[t.subtext_key]))])])],1)};C._withStripped=!0;function A(t,e,a,s,n,r,l,i){var o,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),l?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=o):n&&(o=i?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),o)if(c.functional){c._injectStyles=o;var u=c.render;c.render=function(t,e){return o.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,o):[o]}return{exports:t,options:c}}const q=A({name:"PanelSalaryBankAccount",props:{account:{type:Object,default:function(){return{}}},subtext_key:{type:String,default:"owner_name"},container:{type:Object,default:function(){return{class:"d-flex"}}}}},C,[],!1,null,null,null).exports;var T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agreement?a("div",[t.agreement.description?a("div",{staticClass:"overflow-auto max-h-325px text-center mb-5",domProps:{innerHTML:t._s(t.agreement.description)}}):t._e(),t._v(" "),t.agreement.data?a("b-row",t._l(t.agreement.data,(function(e,s){return t.agreement.data?a("b-col",{key:s,staticClass:"d-flex flex-column text-center"},[a("PanelIcon",{attrs:{icon:e.icon,size:"3x",color:"gray"}}),t._v(" "),a("div",{staticClass:"font-weight-bold text-dark-50 font-size-h6 my-2",domProps:{innerHTML:t._s(e.title)}}),t._v(" "),a("div",{staticClass:"font-weight-bolder text-primary font-size-h5",domProps:{innerHTML:t._s(e.value)}})],1):t._e()})),1):t._e()],1):t._e()};T._withStripped=!0;const E=A({name:"PanelSalaryAgreementDetails",props:{agreement:null}},T,[],!1,null,null,null).exports;PRHelper.getHook().addAction("panel_component_initialized",(t=>{t.component("PanelSalaryBankAccount",q),t.component("PanelSalaryAgreementDetails",E)}));var R=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};R._withStripped=!0;const M=A({name:"PanelSalary"},R,[],!1,null,null,null).exports;var F=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};F._withStripped=!0;const H=A({name:"PanelSalaryWithdraw"},F,[],!1,null,null,null).exports;var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PanelNotice",{attrs:{content:t.translate("salary.withdraw.modal.info"),classes:"mb-5",type:"info"}}),t._v(" "),a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"toolbar",fn:function(){return[a("PanelModal",{attrs:{modal:t.modalProps,button:t.buttonProps,id:"withdraw_modal",title:t.translate("salary.withdraw.modal.title"),loading:t.loading},on:{"modal-show":function(e){return t.onModalShow(e)}},scopedSlots:t._u([{key:"body",fn:function(e){var s=e.close;return[t.error?a("PanelNotice",{attrs:{type:"warning",content:t.error}}):t.fields?[a("PanelNotice",{attrs:{content:t.translate("salary.withdraw.modal.notice"),classes:"mb-10",type:"warning"}}),t._v(" "),a("PanelForm",{attrs:{fields:t.fields,data:t.withdraw,"label-align":!1,id:"add_update_withdraw",tag:"form",offset:"0"},on:{rendered:t.afterRender,changed:t.onModalFormChange},scopedSlots:t._u([{key:"after-field",fn:function(e){return["agreements"===e.field?a("div",{staticClass:"col offset-lg-2"},[a("b-button",{staticClass:"mt-2",attrs:{disabled:t.withdraw.agreements.length<=0||t.timer>0,variant:"outline-primary"},on:{click:t.calculateIncomes}},[t._v("\n                    "+t._s(t.translate("salary.withdraw.action.calculate.title"))+"\n                    "),t.timer>0?a("span",{staticClass:"ml-2"},[t._v(t._s(t.timerResult))]):t._e()]),t._v(" "),t.incomes?a("PanelCollapsibleSimple",{attrs:{items:t.incomes,accordion:"incomes"},scopedSlots:t._u([{key:"toggle",fn:function(e){var s=e.item,n=e.id;return[a("strong",{class:"ml-3 text-"+s.color+("unwithdrawn"===n?" font-size-h5":""),domProps:{innerHTML:t._s(s.title)}})]}},{key:"actions",fn:function(e){var s=e.item,n=e.id;return[a("strong",{class:"text-"+s.color+("unwithdrawn"===n?" font-size-h5":""),domProps:{innerHTML:t._s(s.value)}})]}},{key:"content",fn:function(e){var s=e.item;return[a("p",{staticClass:"text-dark-50 mb-0 fs-sm ml-7",domProps:{innerHTML:t._s(s.description)}})]}},{key:"before-item",fn:function(e){e.item;return["remain"==e.id?a("PanelSeparator",{attrs:{type:"dashed"}}):t._e()]}}],null,!0)}):t._e()],1):t._e()]}}],null,!0)}),t._v(" "),a("div",{staticClass:"text-center pt-5"},[a("PanelActionSubmit",{staticClass:"mr-5",attrs:{name:"save",form:"add_update_withdraw",disabled:!t.canSubmit,text:t.translate("salary.withdraw.action.submit")}}),t._v(" "),a("PanelActionCancel",{on:{click:s}})],1)]:a("PanelSpinner")]}}])})]},proxy:!0},{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key),r=e.id;return["bank_account"===n?a("PanelSalaryBankAccount",{attrs:{account:s.bank_account,subtext_key:"escaped"}}):"status"===n?a("PanelCellStatus",{attrs:{title:s.status_title,status:s.status,statuses:t.statuses,size:"xl"}}):"actions"===n?a("PanelActionLink",{attrs:{name:"details",to:{name:"panel_salary_withdraw_show",params:{id:r}}}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})],1)};B._withStripped=!0;const L={agreements:[]};const z=A({name:"PanelSalaryWithdrawList",data:()=>({error:null,timer:0,fields:null,loading:!1,incomes:{},withdraw:L}),methods:{countDownTimer(){this.timer>0&&setTimeout((()=>{this.timer-=1,this.countDownTimer()}),1e3)},onModalFormChange(t){this.withdraw=t},calculateIncomes(){this.withdraw.agreements?(this.loading=!0,this.$helper.$runAction(t,{agreements:this.withdraw.agreements}).then((({response:t})=>{this.incomes=t})).finally((()=>{this.timer=10,this.loading=!1,this.countDownTimer()}))):this.$helper.$showModal({icon:"warning",html:this.translate("salary.withdraw.action.calculate.not_empty")})},onModalShow(t){this.$store.dispatch(s).then((t=>{this.fields=t})).catch((t=>{this.error=t.data.message}))},afterRender(){this.$helper.$onSubmitForm("add_update_withdraw",this.fields,(()=>{this.loading=!0,this.$helper.$saveForm(this.withdraw,e).then((()=>{this.incomes={},this.withdraw=L,this.$hook.fire("modal:hide","withdraw_modal"),this.$hook.fire("remote-list:refresh")})).finally((()=>{this.loading=!1}))}))},timeFormat:t=>(t+"").replace(/^(\d)$/,"0$1")},computed:{canSubmit(){return!this.$helper.$isEmpty(this.withdraw.agreements)&&!this.$helper.$isEmpty(this.withdraw.target)},statuses:()=>({refused:"danger",pending:"primary",accepted:"success"}),columns(){return{bank_account:{title:this.translate("salary.withdraw.column.bank_account"),width:"25%"},amount:{title:this.translate("salary.withdraw.column.amount"),width:"20%"},status:{title:this.translate("column.status"),width:"20%"},created_at:{title:this.translate("column.created_at"),width:"20%"},actions:{title:this.translate("column.actions"),width:"15%"}}},modalProps:()=>({size:"lg",centered:!0,"hide-footer":!0,"body-class":"mx-5 mx-xl-15 my-7"}),buttonProps(){return{title:this.translate("salary.withdraw.action.add"),variant:"success"}},remoteProps:()=>({api:"/pmpr/v1/salary/withdraw/get-list-by-user","query-params":{sort:"created_at",sortBy:"orderBy"}}),timerResult(){let t=this.timer/60,e=this.timer%60;return this.timeFormat(t>=1?t:0)+":"+this.timeFormat(e)}}},B,[],!1,null,null,null).exports;var D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.withdraw?[a("PanelSingleHeader",t._b({scopedSlots:t._u([{key:"value",fn:function(e){e.item;var s=e.value;return["status"===e.item_key?a("PanelCellStatus",{attrs:{title:t.withdraw.status_title,status:s,statuses:t.statuses,size:"xl"}}):[a("span",{domProps:{innerHTML:t._s(s)}})]]}}],null,!1,4206751963)},"PanelSingleHeader",t.headerProps,!1)),t._v(" "),a("PanelSidebar",{attrs:{tabs:t.tabs,args:{withdraw:t.currentWithdraw,withdrawObj:t.withdraw}}})]:a("PanelSpinner")],2)};D._withStripped=!0;const W={name:"PanelSalaryWithdrawShow",data:()=>({withdraw:null}),beforeMount(){this.$store.dispatch(a,{withdraw:this.currentWithdraw}).then((t=>{this.$helper.$isEmpty(t)?this.$router.push({name:"panel_salary_withdraw_list"}):this.withdraw=t}))},computed:{currentWithdraw(){return this.$route.params.id},headerProps(){return{items:this.withdraw.data,title:this.translate("salary.withdraw.show.title"),description:""}},statuses:()=>({refused:"danger",pending:"primary",accepted:"success"}),tabs(){return this.$router.getRouteChildren("panel_salary_withdraw_show")}}};const j=A(W,D,[],!1,null,null,null).exports;var I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key);e.id;return["withdraw_status"===n?a("PanelCellStatus",{attrs:{title:s.withdraw_status_title,status:s.withdraw_status,statuses:t.statuses,size:"xl"}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})};I._withStripped=!0;const O=A({name:"PanelSalaryWithdrawShowIncomes",props:{withdraw:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/withdraw/get-incomes","query-values":{withdraw:this.withdraw},"query-params":{sort:"created_at",sortBy:"orderBy"}}},statuses:()=>({locked:"danger",withdrawn:"success",unwithdrawn:"primary",nonewithdrawnable:"gray"}),columns(){return{product:{title:this.translate("column.product"),width:"20%"},amount:{title:this.translate("salary.incomes.column.amount"),width:"20%"},agreement_id:{title:this.translate("salary.incomes.column.agreement"),width:"20%"},withdraw_status:{title:this.translate("column.status"),width:"20%"},created_at:{title:this.translate("column.date"),width:"20%"}}}}},I,[],!1,null,null,null).exports;var N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PanelCollapsibleRemote",{staticClass:"mb-7 mb-lg-0",attrs:{remote:t.remoteProps,columns:t.columns,accordion:"payments"},scopedSlots:t._u([{key:"toggle-td",fn:function(e){var s=e.item,n=(e.column,e.column_key);return["status"===n?a("PanelCellStatus",{attrs:{title:s.status_title,status:s[n],statuses:t.statuses,size:"xl"}}):a("PanelCellText",{attrs:{text:s[n]}})]}},{key:"content",fn:function(e){var s=e.item;return[a("b-row",{staticClass:"ml-7",attrs:{"align-h":"between"}},[t._l(t.shortFields,(function(e,n){return a("b-col",{key:n,staticClass:"d-flex justify-content-between my-2",attrs:{md:"6"}},[a("strong",{staticClass:"text-dark-50",domProps:{innerHTML:t._s(e)}}),t._v(" "),a("span",{staticClass:"text-dark-75 font-weight-bolder ml-2",domProps:{innerHTML:t._s(s[n])}})])})),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("div",{staticClass:"my-4"})]),t._v(" "),t._l(t.longFields,(function(e,n){return[a("b-col",{key:"title-"+n,staticClass:"my-2",attrs:{md:"2"}},[a("strong",{staticClass:"text-dark-50",domProps:{innerHTML:t._s(e)}})]),t._v(" "),a("b-col",{key:"value-"+n,attrs:{md:"10"}},[a("span",{staticClass:"text-dark-75 font-weight-bold",domProps:{innerHTML:t._s(s[n])}})])]}))],2)]}},{key:"not-found",fn:function(e){e.item;return[a("PanelNotice",{attrs:{type:"info",content:t.notice}})]}}])})],1)};N._withStripped=!0;const V=A({name:"PanelSalaryWithdrawShowPayments",props:{withdraw:null,withdrawObj:null},computed:{shortFields(){return{reference_id:this.translate("salary.payments.column.reference_id"),terminal_title:this.translate("salary.payments.column.terminal"),tracking_code:this.translate("salary.payments.column.tracking_code"),deduct:this.translate("salary.payments.column.deduct")}},longFields(){return{destination_desc:this.translate("salary.payments.column.destination_desc"),origin_desc:this.translate("salary.payments.column.origin_desc")}},columns(){return{origin_account:{title:this.translate("salary.payments.column.origin_account"),width:"20%"},payout:{title:this.translate("salary.payments.column.payout"),width:"20%"},status:{title:this.translate("column.status"),width:"20%"},trans_datetime:{title:this.translate("salary.payments.column.trans_datetime"),width:"20%"}}},remoteProps(){return{api:"/pmpr/v1/salary/withdraw/get-payments","query-values":{withdraw:this.withdraw},"query-params":{sort:"created_at",sortBy:"orderBy"}}},notice(){return this.translate("salary.withdraw.show.not_accepted",[this.withdrawObj.status_title])},statuses:()=>({})}},N,[],!1,null,null,null).exports;var U=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};U._withStripped=!0;const X=A({name:"PanelSalaryApply"},U,[],!1,null,null,null).exports;var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key),r=e.id;return["actions"===n?a("PanelCellAction",{staticClass:"mr-2",attrs:{id:r,path:"/salary/apply",text:t.getActionText(s),name:t.isRequested(s)?"show":"submit",color:t.isRequested(s)?"success":"primary"}}):"status"===n?a("PanelCellStatus",{attrs:{status:s.status,title:s.status_title,statuses:t.statuses}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})};G._withStripped=!0;const J=A({name:"PanelSalaryApplyList",methods:{isRequested:t=>"requestable"!==t.status&&"unrequestable"!==t.status,getActionText(t){const e=this.isRequested(t)?"show":"submit";return this.translate(`salary.apply.actions.${e}`)}},computed:{remoteProps:()=>({api:"/pmpr/v1/salary/agreement/get-publics","query-params":{sort:"id",sortBy:"orderBy"}}),statuses:()=>({pending:"secondary",rejected:"danger",accepted:"success",awaiting:"warning",requestable:"primary",unrequestable:"warning"}),columns(){return{title:{title:this.translate("column.title"),width:"25%"},status:{title:this.translate("column.status"),width:"25%"},date:{title:this.translate("column.date"),width:"25%"},actions:{title:this.translate("column.actions"),width:"25%"}}}}},G,[],!1,null,null,null).exports;var K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agreement&&t.request?a("div",[a("h1",{staticClass:"mb-6"},[t._v(t._s(t.agreement.title))]),t._v(" "),a("PanelSidebar",{attrs:{tabs:t.tabs,args:{request:t.request,agreement:t.agreement}}})],1):a("PanelSpinner")};K._withStripped=!0;const Q={name:"PanelSalaryApplyShow",data:()=>({request:null,agreement:null}),beforeMount(){const t=this.$route.params.id;Promise.all([this.$store.dispatch(o,{agreement:t}),this.$store.dispatch(c,{agreement:t})]).then((t=>{const e=t[0],a=t[1];PRHelper.getType().isEmpty(a)||PRHelper.getType().isEmpty(e)?this.$router.push({name:"panel_salary_apply_list"}):(this.request=e,this.agreement=a)}))},computed:{tabs(){return this.$router.getRouteChildren("panel_salary_apply_show")},headerProps(){let t={};const e=this.agreement;return e&&(t={items:e.data,title:e.title,description:e.description}),t}}};const Y=A(Q,K,[],!1,null,null,null).exports;var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agreement&&t.steps?a("div",[a("PanelMultistep",{attrs:{steps:t.steps,loading:t.loading,id:"apply_agreement",current:t.currentStep},on:{"submit-validation":t.canSubmit,submitted:t.submit,"next-step-validation":t.nextStepValidation},scopedSlots:t._u([{key:"step",fn:function(e){var s=e.step,n=e.index;return["details"===n?[t.agreement?a("PanelSalaryAgreementDetails",{attrs:{agreement:t.agreement}}):t._e()]:t._e(),t._v(" "),"prerequisites"===n?[a("b-list-group",{attrs:{flush:""}},[t._l(s.items,(function(e,s,n){return[a("b-list-group-item",{key:s,staticClass:"d-flex justify-content-between align-items-center px-0",class:0===n?"pt-0":""},[a("div",[a("PanelIcon",{attrs:{icon:e.icon,size:"lg",color:e.verified?"success":"danger"}}),t._v(" "),a("span",{staticClass:"font-weight-bold ml-2"},[t._v(t._s(e.title))])],1),t._v(" "),a("PanelCellStatus",{attrs:{status:e.status,title:e.status_title,textColor:"pending"===e.status?"dark-50":"",statuses:{pending:"gray",verified:"success",uncompleted:"danger"}}})],1)]}))],2),t._v(" "),a("router-link",{attrs:{to:{name:"panel_user_profile_personal"},custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href;e.route,e.navigate,e.isActive,e.isExactActive;return[a("a",{staticClass:"btn btn-block btn-success mt-3",attrs:{href:s}},[t._v("\n            "+t._s(t.translate("salary.apply.verifications.edit_profile"))+"\n          ")])]}}],null,!0)})]:"terms"===n?[a("div",{staticClass:"overflow-auto max-h-325px border mb-5 p-5",domProps:{innerHTML:t._s(t.agreement.terms)}}),t._v(" "),a("b-form-checkbox",{staticClass:"my-auto",attrs:{id:"consent",name:"consent",value:"accepted","unchecked-value":"not_accepted",size:"lg"},model:{value:t.accept,callback:function(e){t.accept=e},expression:"accept"}},[t._v("\n          "+t._s(t.translate("salary.apply.consent.checkbox"))+"\n        ")])]:t._e()]}}],null,!1,3787457579)})],1):a("PanelSpinner")};Z._withStripped=!0;const tt={name:"PanelSalaryApplySubmit",data:()=>({steps:null,accept:"not_accepted",loading:!1,agreement:null,currentStep:1}),beforeMount(){const t=this.$route.params.id;Promise.all([this.$store.dispatch(c,{apply:!0,agreement:t}),this.$store.dispatch(u,{agreement:t})]).then((t=>{const e=t[1],a=t[0];PRHelper.getType().isEmpty(a)||PRHelper.getType().isEmpty(e)?this.$router.push({name:"panel_salary_apply_list"}):(this.steps=e,this.agreement=a)})).catch((()=>{this.$router.push({name:"panel_salary_apply_list"})}))},methods:{isFieldsVerified(t=null){PRHelper.getType().isEmpty(t)&&(t=this.steps.prerequisites.data||{});for(const e in t){if("verified"!==t[e].status)return!1}return!0},submit(t){this.loading=!0,t.agreement=this.agreement.id,this.$helper.$runAction(d,t).then((({modal:t})=>{t&&t.then((t=>{t.isConfirmed&&this.$router.push({name:"panel_salary_apply_list"})}))})).catch((()=>{this.loading=!1}))},canSubmit(t,e){let a=!0;this.isFieldsVerified()?"not_accepted"===this.accept&&(a=this.translate("salary.apply.consent.error.not_accept")):a=this.translate("salary.apply.consent.error.not_appliable"),e(a)},nextStepValidation(t,e,a){let s=!0;if(3===t)this.isFieldsVerified(e.items)||(s=this.translate("salary.apply.consent.error.not_appliable"));a(s)}}};const et=A(tt,Z,[],!1,null,null,null).exports;var at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.agreement?a("div",{staticClass:"lh-2",domProps:{innerHTML:t._s(t.agreement.terms)}}):t._e()]},proxy:!0}])})};at._withStripped=!0;const st=A({name:"PanelSalaryApplyShowTerms",props:{agreement:null}},at,[],!1,null,null,null).exports;var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.request?a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[a("b-row",[a("b-col",{attrs:{sm:"12",md:"4",lg:"3",xxl:"2"}},[a("div",{staticClass:"d-flex flex-column text-center"},[a("strong",{staticClass:"mb-3"},[t._v(t._s(t.translate("salary.column.current_status")))]),t._v(" "),a("PanelCellStatus",{attrs:{status:t.request.status,title:t.request.status_title,statuses:t.statuses,size:"xl"}})],1),t._v(" "),a("hr",{staticClass:"my-3"}),t._v(" "),a("div",{staticClass:"d-flex flex-column text-center"},[a("strong",{staticClass:"mb-3"},[t._v(t._s(t.translate("salary.column.request_date")))]),t._v(" "),a("PanelCellText",{attrs:{text:t.request.created_at}})],1)]),t._v(" "),a("b-col",{attrs:{sm:"12",md:"8",lg:"9",xxl:"10"}},[t.request.status_description?a("div",{domProps:{innerHTML:t._s(t.request.status_description)}}):t._e(),t._v(" "),"rejected"===t.request.status?a("PanelNotice",{attrs:{content:t.request.description,type:"info",classes:"mt-4"}}):"awaiting"===t.request.status?a("div",{staticClass:"mt-4"},[t.fields?a("PanelForm",{attrs:{fields:t.fields,labelAlign:"left",id:"pay_payment",tag:"form"}}):a("PanelSpinner")],1):t._e()],1)],1)]},proxy:!0}],null,!1,3961241012)}):t._e()};nt._withStripped=!0;const rt=A({name:"PanelSalaryApplyShowStatus",data:()=>({fields:null}),props:{request:null},beforeMount(){if("awaiting"===this.request.status){const t=this.$route.params.id;this.$store.dispatch(m,{agreement:t}).then((t=>{this.fields=t})).catch((()=>{this.$helper.$showModal({icon:"warning",html:this.translate("error.refresh_page")})}))}},computed:{statuses:()=>({pending:"secondary",rejected:"danger",accepted:"success",awaiting:"warning"})}},nt,[],!1,null,null,null).exports;var lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.agreement?a("PanelSalaryAgreementDetails",{attrs:{agreement:t.agreement}}):t._e()]},proxy:!0}])})};lt._withStripped=!0;const it=A({name:"PanelSalaryApplyShowDetails",props:{agreement:null}},lt,[],!1,null,null,null).exports;var ot=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};ot._withStripped=!0;const ct=A({name:"PanelSalaryAgreement"},ot,[],!1,null,null,null).exports;var ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"toolbar",fn:function(){return[a("router-link",{attrs:{to:"/salary/apply",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,n=e.route;e.navigate,e.isActive,e.isExactActive;return[a("a",{staticClass:"btn btn-success",attrs:{href:s}},[t._v("\n        "+t._s(n.meta.title)+"\n      ")])]}}])})]},proxy:!0},{key:"td",fn:function(t){var e=t.item,s=(t.column,t.column_key),n=t.id;return["actions"===s?a("PanelActionLink",{attrs:{name:"details",to:{name:"panel_salary_agreement_show",params:{id:n}}}}):a("PanelCellText",{attrs:{text:e[s]}})]}}])})};ut._withStripped=!0;const dt=A({name:"PanelSalaryAgreementList",computed:{remoteProps:()=>({api:"/pmpr/v1/salary/agreement/get-list-by-user","query-params":{sort:"created_at",sortBy:"orderBy"}}),columns(){return{title:{title:this.translate("column.title"),width:"35%"},products:{title:this.translate("salary.agreement.column.products"),width:"45%"},actions:{title:this.translate("column.actions"),width:"20%"}}}}},ut,[],!1,null,null,null).exports;var mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PanelSingleHeader",t._b({},"PanelSingleHeader",t.headerProps,!1)),t._v(" "),t.agreement?a("PanelSidebar",{attrs:{tabs:t.tabs,args:{agreement:t.agreement.id,agreementObj:t.agreement}}}):t._e()],1)};mt._withStripped=!0;const pt={name:"PanelSalaryAgreementShow",data:()=>({agreement:null}),beforeMount(){this.$store.dispatch(c,{agreement:this.$route.params.id}).then((t=>{this.$helper.$isEmpty(t)?this.$router.push({name:"panel_salary_agreement_list"}):this.agreement=t}))},computed:{headerProps(){let t={},e=this.agreement;return e&&(t={items:e.data,title:e.title,description:e.description}),t},tabs(){return this.$router.getRouteChildren("panel_salary_agreement_show")}}};const ht=A(pt,mt,[],!1,null,null,null).exports;var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.agreementObj?a("div",{staticClass:"lh-2",domProps:{innerHTML:t._s(t.agreementObj.terms)}}):a("PanelSpinner")]},proxy:!0}])})};_t._withStripped=!0;const wt=A({name:"PanelSalaryAgreementShowTerms",props:{agreementObj:null}},_t,[],!1,null,null,null).exports;var yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key);e.id;return["withdraw_status"===n?a("PanelCellStatus",{attrs:{title:s.withdraw_status_title,status:s.withdraw_status,statuses:t.statuses,size:"xl"}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})};yt._withStripped=!0;const ft=A({name:"PanelSalaryAgreementShowIncomes",props:{agreement:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/agreement/get-incomes","query-values":{agreement:this.agreement},"query-params":{sort:"created_at",sortBy:"orderBy"}}},statuses:()=>({locked:"danger",withdrawn:"success",unwithdrawn:"primary",nonewithdrawnable:"gray"}),columns(){return{product:{title:this.translate("column.product"),width:"25%"},amount:{title:this.translate("salary.incomes.column.amount"),width:"25%"},withdraw_status:{title:this.translate("column.status"),width:"25%"},created_at:{title:this.translate("column.date"),width:"25%"}}}}},yt,[],!1,null,null,null).exports;var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(t){var e=t.item,s=(t.column,t.column_key);t.id;return[a("PanelCellText",{attrs:{text:e[s]}})]}}])})};gt._withStripped=!0;const vt=A({name:"PanelSalaryAgreementShowProducts",props:{agreement:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/agreement/get-products","query-values":{agreement:this.agreement},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{title:{title:this.translate("column.title"),width:"40%"},incomes_count:{title:this.translate("salary.column.sale_count"),width:"30%"},incomes_sum:{title:this.translate("salary.column.your_income"),width:"30%"}}}}},gt,[],!1,null,null,null).exports;var Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(t){var e=t.item,s=(t.column,t.column_key);t.id;return[a("PanelCellText",{attrs:{text:e[s]}})]}}])})};Pt._withStripped=!0;const bt=A({name:"PanelSalaryAgreementShowCategories",props:{agreement:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/agreement/get-categories","query-values":{agreement:this.agreement},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{title:{title:this.translate("column.title"),width:"35%"},products:{title:this.translate("salary.categories.column.products"),width:"20%"},incomes_count:{title:this.translate("salary.column.sale_count"),width:"20%"},incomes_sum:{title:this.translate("salary.column.your_income"),width:"25%"}}}}},Pt,[],!1,null,null,null).exports;var St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCollapsibleRemote",{attrs:{remote:t.remoteProps,accordion:"bank-account-list"},scopedSlots:t._u([{key:"toolbar",fn:function(){return[a("PanelModal",{attrs:{modal:t.modalProps,button:t.buttonProps,id:"bank_account_modal",loading:t.loading,title:t.translate("salary.bank_accounts.modal.title")},on:{"modal-hide":function(e){return t.onModalHide(e)},"modal-show":function(e){return t.onModalShow(e)}},scopedSlots:t._u([{key:"body",fn:function(e){var s=e.close;return[t.fields?[a("PanelNotice",{attrs:{content:t.translate("salary.bank_accounts.modal.notice"),classes:"mb-10"}}),t._v(" "),a("PanelForm",{attrs:{fields:t.fields,data:t.account,labelAlign:"left",id:"save_bank_account",tag:"form",offset:"0"},on:{changed:function(e){t.data=e},rendered:t.afterRender}}),t._v(" "),a("div",{staticClass:"text-center pt-5"},[a("PanelActionSubmit",{staticClass:"mr-5",attrs:{name:"save",form:"save_bank_account",text:t.translate("salary.bank_accounts.action.save")}}),t._v(" "),a("PanelActionCancel",{on:{click:s}})],1)]:a("PanelSpinner")]}}])})]},proxy:!0},{key:"toggle",fn:function(t){var e=t.item;return[a("PanelSalaryBankAccount",{attrs:{account:e,container:{class:"d-flex ml-3"}}})]}},{key:"actions",fn:function(e){var s=e.item;return[a("div",{staticClass:"d-flex my-3 ml-5"},[a("PanelCellStatus",{attrs:{status:s.status,title:s.status_title,classes:"my-auto",statuses:{locked:"primary",editable:"success"}}}),t._v(" "),t._l(t.actions,(function(e,n){return a("b-button",{key:n,ref:n,refInFor:!0,staticClass:"ml-2",attrs:{disabled:s.locked,"data-action":n,variant:"light",size:"sm","data-key":s.escaped},on:{click:function(e){return t.onClick(e,n,s.form)}}},[a("PanelIcon",{staticClass:"mx-0",attrs:{icon:e.icon,size:"xs",color:"primary"}})],1)}))],2)]}},{key:"content",fn:function(e){var s=e.item;return[a("b-row",{staticClass:"ml-7",attrs:{"align-h":"between"}},t._l(s.data,(function(e,s){var n=e.title,r=e.value;return a("b-col",{key:s,staticClass:"d-flex justify-content-between my-2",attrs:{md:"5"}},[a("strong",{staticClass:"text-dark-50"},[t._v(t._s(n))]),t._v(" "),a("span",{staticClass:"text-dark"},[t._v(t._s(r))])])})),1)]}}])})};St._withStripped=!0;const $t={type:"iban"};const xt=A({name:"PanelUserProfileBankAccounts",data:()=>({data:{},fields:null,loading:!1,account:$t}),methods:{reset(){this.data=$t},afterRender(){this.$helper.$onSubmitForm("save_bank_account",this.fields,(()=>{this.loading=!0;let t=this.data;this.$helper.$isFormChanged(t,this.account)?(this.account&&(t={...t,id:this.account.id}),this.$helper.$saveForm(t,b).then((()=>{this.$hook.fire("modal:hide","bank_account_modal"),this.$hook.fire("remote-list:refresh")})).finally((()=>{this.loading=!1}))):this.loading=!1}))},onModalHide(t){this.reset()},onModalShow(t){this.$store.dispatch(v).then((t=>{this.fields=t}))},onClick(t,e,a){switch(e){case"edit":this.data=a,this.account=a,this.$hook.fire("modal:show","bank_account_modal");break;case"remove":this.$helper.$showModal({icon:"warning",html:this.translate("salary.bank_accounts.action.remove.description"),showDenyButton:!0,confirmButtonText:this.translate("salary.bank_accounts.action.remove.title"),showLoaderOnConfirm:!0,preConfirm:()=>this.$helper.$runAction(P,{id:a.id}).then((({modal:t})=>{this.$hook.fire("remote-list:refresh")}))})}}},computed:{actions(){return{edit:{icon:"fasm/6/set/pencil",title:this.translate("salary.bank_accounts.action.edit.title")},remove:{icon:"fasm/6/set/trash",title:this.translate("salary.bank_accounts.action.remove.title")}}},modalProps:()=>({size:"lg",centered:!0,"hide-footer":!0,"body-class":"mx-5 mx-xl-15 my-7"}),buttonProps(){return{title:this.translate("salary.bank_accounts.action.add"),variant:"success"}},remoteProps:()=>({api:"/pmpr/v1/salary/bank-account/get-list"})}},St,[],!1,null,null,null).exports;window.PanelSalary=M,window.PanelSalaryWithdraw=H,window.PanelSalaryWithdrawList=z,window.PanelSalaryWithdrawShow=j,window.PanelSalaryWithdrawShowIncomes=O,window.PanelSalaryWithdrawShowPayments=V,window.PanelSalaryApply=X,window.PanelSalaryApplyList=J,window.PanelSalaryApplyShow=Y,window.PanelSalaryApplySubmit=et,window.PanelSalaryApplyShowTerms=st,window.PanelSalaryApplyShowStatus=rt,window.PanelSalaryApplyShowDetails=it,window.PanelSalaryAgreement=ct,window.PanelSalaryAgreementList=dt,window.PanelSalaryAgreementShow=ht,window.PanelSalaryAgreementShowTerms=wt,window.PanelSalaryAgreementShowIncomes=ft,window.PanelSalaryAgreementShowProducts=vt,window.PanelSalaryAgreementShowCategories=bt,window.PanelUserProfileBankAccounts=xt})();