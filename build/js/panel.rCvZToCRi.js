(()=>{"use strict";const t="checkCoupon",e="submitRequest",a="submitPayment",s="fetchStepsData",n="fetchPaymentFields",r="setSteps",l="setPaymentFields",i="/pmpr/v1/salary/apply",o={[r](t,e){t.steps=e},[l](t,e){t.paymentFields=e}},c={state:{steps:null,paymentFields:null},actions:{[s]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${i}/get-steps`,{params:e}).then((e=>{t(r,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[e]({commit:t,state:e},a){return new Promise(((t,e)=>{this._vm.$api.$post(`${i}/submit`,a).then((e=>{t(e.data)})).catch((({response:t})=>{e(t)}))}))},[n]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${i}/get-payment-fields`,{params:e}).then((e=>{t(l,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[t]({commit:t},e){return new Promise(((t,a)=>{this._vm.$api.$post(`${i}/check-coupon`,e).then((e=>{t(e.data)})).catch((({response:t})=>{a(t)}))}))},[a]({commit:t},e){return new Promise(((t,a)=>{this._vm.$api.$post(`${i}/submit-payment`,e).then((e=>{t(e.data)})).catch((({response:t})=>{a(t)}))}))}},mutations:o},u="calculateIncomes",d="submitWithdraw",m="fetchWithdraw",p="fetchWithdrawFields",h="setWithdrawFields",_="/pmpr/v1/salary/withdraw",y={[h](t,e){t.fields=e}},w={state:{fields:null},actions:{[d](t,e){return this._vm.$helper.$apiRequest(`${_}/submit`,e)},[u](t,e){return this._vm.$helper.$apiRequest(`${_}/calculate`,e)},[m](t,e){return this._vm.$helper.$apiRequest(`${_}/get-withdraw`,e,"$get")},[p]({commit:t,state:e}){return new Promise(((e,a)=>{this._vm.$api.$get(`${_}/get-fields`).then((a=>{t(h,a.data),e(a.data)})).catch((({response:t})=>{a(t)}))}))}},mutations:y,getters:{}},f="fetchRequest",g="fetchAgreement",v="fetchAgreementByRequest",b="setRequest",P="setAgreement",S="setRequestAgreement",x="/pmpr/v1/salary/agreement",$={[b](t,e){t.request=e},[P](t,e){t.agreement=e},[S](t,e){t.requestAgreement=e}},k={state:{request:null,agreement:null,requestAgreement:null},actions:{[f]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${x}/get-request`,{params:e}).then((e=>{t(b,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[g]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${x}/get-agreement`,{params:e}).then((e=>{t(P,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))},[v]({commit:t},e){return new Promise(((a,s)=>{this._vm.$api.$get(`${x}/get-request-agreement`,{params:e}).then((e=>{t(S,e.data),a(e.data)})).catch((({response:t})=>{s(t)}))}))}},mutations:$},C="fetchBankAccountFields",A="deleteBankAccount",q="saveBankAccount",T="setBankAccountFields",E="/pmpr/v1/salary/bank-account",M={[T](t,e){t.fields=e}},R={state:{fields:null},actions:{[q](t,e){return this._vm.$helper.$apiRequest(`${E}/save`,e)},[A](t,e){return this._vm.$helper.$apiRequest(`${E}/delete`,e,"$delete")},[C]({commit:t,state:e}){return new Promise(((e,a)=>{this._vm.$api.$get(`${E}/get-fields`).then((a=>{t(T,a.data),e(a.data)})).catch((({response:t})=>{a(t)}))}))}},mutations:M,getters:{}};PRHelper.getHook().addFilter("panel_store_modules",(t=>(t["salary-back-account"]=R,t["salary-agreement"]=k,t["salary-withdraw"]=w,t["salary-apply"]=c,t)),500);var H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._b({},"div",t.container,!1),[a("PanelIcon",{attrs:{icon:t.account.icon,size:"3x",color:"no-color"}}),t._v(" "),a("div",{staticClass:"d-flex flex-column my-auto ml-3"},[a("strong",{staticClass:"mb-1"},[t._v(t._s(t.account.bank))]),t._v(" "),a("span",{staticClass:"text-dark-50"},[t._v(t._s(t.account[t.subtext_key]))])])],1)};H._withStripped=!0;function F(t,e,a,s,n,r,l,i){var o,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),l?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=o):n&&(o=i?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),o)if(c.functional){c._injectStyles=o;var u=c.render;c.render=function(t,e){return o.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,o):[o]}return{exports:t,options:c}}const B=F({name:"PanelSalaryBankAccount",props:{account:{type:Object,default:function(){return{}}},subtext_key:{type:String,default:"owner_name"},container:{type:Object,default:function(){return{class:"d-flex"}}}}},H,[],!1,null,null,null).exports;var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agreement?a("div",[t.agreement.data?a("b-row",{staticClass:"mb-5"},t._l(t.agreement.data,(function(e,s){return t.agreement.data?a("b-col",{key:s,staticClass:"d-flex flex-column text-center mb-4 mb-lg-0",attrs:{sm:"12",md:"6",xl:""}},[a("PanelIcon",{attrs:{icon:e.icon,size:"3x",color:"gray"}}),t._v(" "),a("div",{staticClass:"font-weight-bold text-dark-50 font-size-h6 my-2",domProps:{innerHTML:t._s(e.title)}}),t._v(" "),a("div",{staticClass:"font-weight-bolder text-primary font-size-h5",domProps:{innerHTML:t._s(e.value)}})],1):t._e()})),1):t._e(),t._v(" "),t.agreement.description?a("div",{class:t.scrollable?"overflow-auto max-h-325px border p-5 editor-content":"editor-content",domProps:{innerHTML:t._s(t.agreement.description)}}):t._e()],1):t._e()};L._withStripped=!0;const D=F({name:"PanelSalaryAgreementDetails",props:{agreement:null,scrollable:!1}},L,[],!1,null,null,null).exports;PRHelper.getHook().addAction("panel_component_initialized",(t=>{t.component("PanelSalaryBankAccount",B),t.component("PanelSalaryAgreementDetails",D)}));var z=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};z._withStripped=!0;const j=F({name:"PanelSalary"},z,[],!1,null,null,null).exports;var W=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};W._withStripped=!0;const I=F({name:"PanelSalaryWithdraw"},W,[],!1,null,null,null).exports;var N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PanelNotice",{attrs:{content:t.translate("salary.withdraw.modal.info"),classes:"mb-5",type:"primary"}}),t._v(" "),a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"toolbar",fn:function(){return[a("PanelModal",{attrs:{modal:t.modalProps,button:t.buttonProps,id:"withdraw_modal",title:t.translate("salary.withdraw.modal.title"),loading:t.loading},on:{"modal-show":function(e){return t.onModalShow(e)}},scopedSlots:t._u([{key:"body",fn:function(e){var s=e.close;return[t.error?a("PanelNotice",{attrs:{type:"warning",content:t.error}}):t.fields?[a("PanelNotice",{attrs:{content:t.translate("salary.withdraw.modal.notice"),classes:"mb-10",type:"warning"}}),t._v(" "),a("PanelForm",{attrs:{fields:t.fields,data:t.withdraw,"label-align":!1,id:"add_update_withdraw",tag:"form",offset:"0"},on:{rendered:t.afterRender,changed:t.onModalFormChange},scopedSlots:t._u([{key:"after-field",fn:function(e){return["agreements"===e.field?a("div",{staticClass:"col offset-lg-2"},[a("b-button",{staticClass:"mt-2",attrs:{disabled:t.withdraw.agreements.length<=0||t.timer>0,variant:"outline-primary"},on:{click:t.calculateIncomes}},[t._v("\n                    "+t._s(t.translate("salary.withdraw.action.calculate.title"))+"\n                    "),t.timer>0?a("span",{staticClass:"ml-2"},[t._v(t._s(t.timerResult))]):t._e()]),t._v(" "),t.incomes?a("PanelCollapsibleSimple",{attrs:{items:t.incomes,accordion:"incomes"},scopedSlots:t._u([{key:"toggle",fn:function(e){var s=e.item,n=e.id;return[a("strong",{class:"ml-3 text-"+s.color+("unwithdrawn"===n?" font-size-h5":""),domProps:{innerHTML:t._s(s.title)}})]}},{key:"actions",fn:function(e){var s=e.item,n=e.id;return[a("strong",{class:"text-"+s.color+("unwithdrawn"===n?" font-size-h5":""),domProps:{innerHTML:t._s(s.value)}})]}},{key:"content",fn:function(e){var s=e.item;return[a("p",{staticClass:"text-dark-50 mb-0 fs-sm ml-7",domProps:{innerHTML:t._s(s.description)}})]}},{key:"before-item",fn:function(e){e.item;return["remain"===e.id?a("PanelSeparator",{attrs:{type:"dashed"}}):t._e()]}}],null,!0)}):t._e()],1):t._e()]}}],null,!0)}),t._v(" "),a("PanelModalActions",{attrs:{submitActionProps:{name:"save",form:"add_update_withdraw",disabled:!t.canSubmit,text:t.translate("salary.withdraw.action.submit")}},on:{canceled:s}})]:a("PanelSpinner")]}}])})]},proxy:!0},{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key),r=e.id;return["bank_account"===n?a("PanelSalaryBankAccount",{attrs:{account:s.bank_account,subtext_key:"escaped"}}):"status"===n?a("PanelCellStatus",{attrs:{title:s.status_title,status:s.status,statuses:t.statuses,size:"xl"}}):"actions"===n?a("PanelActionLink",{attrs:{name:"details",to:{name:"panel_salary_withdraw_show",params:{id:r}}}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})],1)};N._withStripped=!0;const O={agreements:[]};const V=F({name:"PanelSalaryWithdrawList",data:()=>({error:null,timer:0,fields:null,loading:!1,incomes:{},withdraw:O}),methods:{countDownTimer(){this.timer>0&&setTimeout((()=>{this.timer-=1,this.countDownTimer()}),1e3)},onModalFormChange(t){this.withdraw=t},calculateIncomes(){this.withdraw.agreements?(this.loading=!0,this.$helper.$runAction(u,{agreements:this.withdraw.agreements}).then((({response:t})=>{this.incomes=t})).finally((()=>{this.timer=10,this.loading=!1,this.countDownTimer()}))):this.$helper.$showModal({icon:"warning",html:this.translate("salary.withdraw.action.calculate.not_empty")})},onModalShow(t){this.$store.dispatch(p).then((t=>{this.fields=t})).catch((t=>{this.error=t.data.message}))},afterRender(){this.$helper.$onSubmitForm("add_update_withdraw",this.fields,(()=>{this.loading=!0,this.$helper.$saveForm(this.withdraw,d).then((()=>{this.incomes={},this.withdraw=O,this.$hook.fire("modal:hide","withdraw_modal"),this.$hook.fire("remote-list:refresh")})).finally((()=>{this.loading=!1}))}))},timeFormat:t=>(t+"").replace(/^(\d)$/,"0$1")},computed:{canSubmit(){return!this.$helper.$isEmpty(this.withdraw.agreements)&&!this.$helper.$isEmpty(this.withdraw.target)},statuses:()=>({refused:"danger",pending:"primary",accepted:"success"}),columns(){return{bank_account:{title:this.translate("salary.withdraw.column.bank_account"),width:"25%"},amount:{title:this.translate("salary.withdraw.column.amount"),width:"20%"},status:{title:this.translate("column.status"),width:"20%"},created_at:{title:this.translate("column.created_at"),width:"20%"},actions:{title:this.translate("column.actions"),width:"15%"}}},modalProps:()=>({size:"lg",centered:!0,"hide-footer":!0,"body-class":"mx-5 mx-xl-15 my-7"}),buttonProps(){return{title:this.translate("salary.withdraw.action.add"),variant:"success"}},remoteProps:()=>({api:"/pmpr/v1/salary/withdraw/get-list-by-user","query-params":{sort:"created_at",sortBy:"orderBy"}}),timerResult(){let t=this.timer/60,e=this.timer%60;return this.timeFormat(t>=1?t:0)+":"+this.timeFormat(e)}}},N,[],!1,null,null,null).exports;var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.withdraw?[a("PanelSingleHeader",t._b({scopedSlots:t._u([{key:"value",fn:function(e){e.item;var s=e.value;return["status"===e.item_key?a("PanelCellStatus",{attrs:{title:t.withdraw.status_title,status:s,statuses:t.statuses,size:"xl"}}):[a("span",{domProps:{innerHTML:t._s(s)}})]]}}],null,!1,4206751963)},"PanelSingleHeader",t.headerProps,!1)),t._v(" "),a("PanelSidebar",{attrs:{tabs:t.tabs,args:{withdraw:t.currentWithdraw,withdrawObj:t.withdraw}}})]:a("PanelSpinner")],2)};U._withStripped=!0;const X={name:"PanelSalaryWithdrawShow",data:()=>({withdraw:null}),beforeMount(){this.$store.dispatch(m,{withdraw:this.currentWithdraw}).then((t=>{this.$helper.$isEmpty(t)?this.$router.push({name:"panel_salary_withdraw_list"}):this.withdraw=t}))},computed:{currentWithdraw(){return this.$route.params.id},headerProps(){return{items:this.withdraw.data,title:this.translate("salary.withdraw.show.title"),description:""}},statuses:()=>({refused:"danger",pending:"primary",accepted:"success"}),tabs(){return this.$router.getRouteChildren("panel_salary_withdraw_show")}}};const G=F(X,U,[],!1,null,null,null).exports;var J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key);e.id;return["withdraw_status"===n?a("PanelCellStatus",{attrs:{title:s.withdraw_status_title,status:s.withdraw_status,statuses:t.statuses,size:"xl"}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})};J._withStripped=!0;const K=F({name:"PanelSalaryWithdrawShowIncomes",props:{withdraw:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/withdraw/get-incomes","query-values":{withdraw:this.withdraw},"query-params":{sort:"created_at",sortBy:"orderBy"}}},statuses:()=>({locked:"danger",withdrawn:"success",unwithdrawn:"primary",nonewithdrawnable:"gray"}),columns(){return{product:{title:this.translate("column.product"),width:"20%"},amount:{title:this.translate("salary.incomes.column.amount"),width:"20%"},agreement_id:{title:this.translate("salary.incomes.column.agreement"),width:"20%"},withdraw_status:{title:this.translate("column.status"),width:"20%"},created_at:{title:this.translate("column.date"),width:"20%"}}}}},J,[],!1,null,null,null).exports;var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PanelCollapsibleRemote",{staticClass:"mb-7 mb-lg-0",attrs:{remote:t.remoteProps,columns:t.columns,accordion:"payments"},scopedSlots:t._u([{key:"toggle-td",fn:function(e){var s=e.item,n=(e.column,e.column_key);return["status"===n?a("PanelCellStatus",{attrs:{title:s.status_title,status:s[n],statuses:t.statuses,size:"xl"}}):a("PanelCellText",{attrs:{text:s[n]}})]}},{key:"content",fn:function(e){var s=e.item;return[a("b-row",{staticClass:"ml-7",attrs:{"align-h":"between"}},[t._l(t.shortFields,(function(e,n){return a("b-col",{key:n,staticClass:"d-flex justify-content-between my-2",attrs:{md:"6"}},[a("strong",{staticClass:"text-dark-50",domProps:{innerHTML:t._s(e)}}),t._v(" "),a("span",{staticClass:"text-dark-75 font-weight-bolder ml-2",domProps:{innerHTML:t._s(s[n])}})])})),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("div",{staticClass:"my-4"})]),t._v(" "),t._l(t.longFields,(function(e,n){return[a("b-col",{key:"title-"+n,staticClass:"my-2",attrs:{md:"2"}},[a("strong",{staticClass:"text-dark-50",domProps:{innerHTML:t._s(e)}})]),t._v(" "),a("b-col",{key:"value-"+n,attrs:{md:"10"}},[a("span",{staticClass:"text-dark-75 font-weight-bold",domProps:{innerHTML:t._s(s[n])}})])]}))],2)]}},{key:"not-found",fn:function(e){e.item;return[a("PanelNotice",{attrs:{type:"info",content:t.notice}})]}}])})],1)};Q._withStripped=!0;const Y=F({name:"PanelSalaryWithdrawShowPayments",props:{withdraw:null,withdrawObj:null},computed:{shortFields(){return{reference_id:this.translate("salary.payments.column.reference_id"),terminal_title:this.translate("salary.payments.column.terminal"),tracking_code:this.translate("salary.payments.column.tracking_code"),deduct:this.translate("salary.payments.column.deduct")}},longFields(){return{destination_desc:this.translate("salary.payments.column.destination_desc"),origin_desc:this.translate("salary.payments.column.origin_desc")}},columns(){return{origin_account:{title:this.translate("salary.payments.column.origin_account"),width:"20%"},payout:{title:this.translate("salary.payments.column.payout"),width:"20%"},status:{title:this.translate("column.status"),width:"20%"},trans_datetime:{title:this.translate("salary.payments.column.trans_datetime"),width:"20%"}}},remoteProps(){return{api:"/pmpr/v1/salary/withdraw/get-payments","query-values":{withdraw:this.withdraw},"query-params":{sort:"created_at",sortBy:"orderBy"}}},notice(){return this.translate("salary.withdraw.show.not_accepted",[this.withdrawObj.status_title])},statuses:()=>({})}},Q,[],!1,null,null,null).exports;var Z=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};Z._withStripped=!0;const tt=F({name:"PanelSalaryApply"},Z,[],!1,null,null,null).exports;var et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key),r=e.id;return["actions"===n?a("PanelCellAction",{staticClass:"mr-2",attrs:{id:r,path:"/salary/apply",text:t.getActionText(s),name:t.isRequested(s)?"show":"submit",color:t.isRequested(s)?"success":"primary"}}):"status"===n?a("PanelCellStatus",{attrs:{status:s.status,title:s.status_title,statuses:t.statuses}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})};et._withStripped=!0;const at=F({name:"PanelSalaryApplyList",methods:{isRequested:t=>"requestable"!==t.status&&"unrequestable"!==t.status,getActionText(t){const e=this.isRequested(t)?"show":"submit";return this.translate(`salary.apply.actions.${e}`)}},computed:{remoteProps:()=>({api:"/pmpr/v1/salary/agreement/get-publics","query-params":{sort:"id",sortBy:"orderBy"}}),statuses:()=>({pending:"secondary",rejected:"danger",accepted:"success",requestable:"primary",unrequestable:"warning",awaiting_review:"warning",awaiting_payment:"warning"}),columns(){return{title:{title:this.translate("column.title"),width:"25%"},status:{title:this.translate("column.status"),width:"25%"},date:{title:this.translate("salary.column.request_date"),width:"25%"},actions:{title:this.translate("column.actions"),width:"25%"}}}}},et,[],!1,null,null,null).exports;var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agreement&&t.request?a("div",[a("h1",{staticClass:"mb-6"},[t._v(t._s(t.agreement.title))]),t._v(" "),a("PanelSidebar",{attrs:{tabs:t.tabs,args:{request:t.request,agreement:t.agreement}}})],1):a("PanelSpinner")};st._withStripped=!0;const nt={name:"PanelSalaryApplyShow",data:()=>({request:null,agreement:null}),beforeMount(){const t=this.$route.params.id;Promise.all([this.$store.dispatch(f,{agreement:t}),this.$store.dispatch(g,{agreement:t})]).then((t=>{const e=t[0],a=t[1];PRHelper.getType().isEmpty(a)||PRHelper.getType().isEmpty(e)?this.$router.push({name:"panel_salary_apply_list"}):(this.request=e,this.agreement=a)}))},computed:{tabs(){return this.$router.getRouteChildren("panel_salary_apply_show")},headerProps(){let t={};const e=this.agreement;return e&&(t={items:e.data,title:e.title,description:e.description}),t}}};const rt=F(nt,st,[],!1,null,null,null).exports;var lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agreement&&t.steps?a("div",[a("PanelMultistep",{attrs:{steps:t.steps,loading:t.loading,id:"apply_agreement",current:t.currentStep},on:{"submit-validation":t.canSubmit,submitted:t.submit,"next-step-validation":t.nextStepValidation},scopedSlots:t._u([{key:"step",fn:function(e){var s=e.step,n=e.index;return["details"===n?[t.agreement?a("PanelSalaryAgreementDetails",{attrs:{agreement:t.agreement,scrollable:!0}}):t._e()]:t._e(),t._v(" "),"prerequisites"===n?[a("b-list-group",{attrs:{flush:""}},[t._l(s.items,(function(e,s,n){return[a("b-list-group-item",{key:s,staticClass:"d-flex justify-content-between align-items-center px-0",class:0===n?"pt-0":""},[a("div",[a("PanelIcon",{attrs:{icon:e.icon,size:"lg",color:e.verified?"success":"danger"}}),t._v(" "),a("span",{staticClass:"font-weight-bold ml-2"},[t._v(t._s(e.title))])],1),t._v(" "),a("PanelCellStatus",{attrs:{status:e.status,title:e.status_title,statuses:{pending:"warning",verified:"success",uncompleted:"danger"}}})],1)]}))],2),t._v(" "),a("div",{staticClass:"d-flex justify-content-between mt-3"},[a("span",{staticClass:"my-auto"},[t._v(t._s(t.translate("salary.apply.verifications.message.edit_profile")))]),t._v(" "),a("router-link",{attrs:{to:{name:"panel_user_profile_personal"},custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href;e.route,e.navigate,e.isActive,e.isExactActive;return[a("a",{staticClass:"btn btn-success",attrs:{href:s}},[t._v("\n              "+t._s(t.translate("salary.apply.verifications.edit_profile"))+"\n            ")])]}}],null,!0)})],1)]:"terms"===n?[a("div",{staticClass:"overflow-auto editor-content max-h-325px border mb-5 p-5",domProps:{innerHTML:t._s(t.agreement.terms)}}),t._v(" "),a("b-form-checkbox",{staticClass:"my-auto",attrs:{id:"consent",name:"consent",value:"accepted","unchecked-value":"not_accepted",size:"lg"},model:{value:t.accept,callback:function(e){t.accept=e},expression:"accept"}},[t._v("\n          "+t._s(t.translate("salary.apply.consent.checkbox"))+"\n        ")])]:t._e()]}}],null,!1,628527925)})],1):a("PanelSpinner")};lt._withStripped=!0;const it={name:"PanelSalaryApplySubmit",data:()=>({steps:null,accept:"not_accepted",loading:!1,agreement:null,currentStep:1}),beforeMount(){const t=this.$route.params.id;Promise.all([this.$store.dispatch(g,{apply:!0,agreement:t}),this.$store.dispatch(s,{agreement:t})]).then((t=>{const e=t[1],a=t[0];PRHelper.getType().isEmpty(a)||PRHelper.getType().isEmpty(e)?this.$router.push({name:"panel_salary_apply_list"}):(this.steps=e,this.agreement=a)})).catch((()=>{this.$router.push({name:"panel_salary_apply_list"})}))},methods:{isFieldsVerified(t=null){PRHelper.getType().isEmpty(t)&&(t=this.steps.prerequisites.data||{});for(const e in t){if("verified"!==t[e].status)return!1}return!0},submit(t){this.loading=!0,t.agreement=this.agreement.id,this.$helper.$runAction(e,t).then((({modal:t})=>{t&&t.then((t=>{t.isConfirmed&&this.$router.push({name:"panel_salary_apply_list"})}))})).catch((()=>{this.loading=!1}))},canSubmit(t,e){let a=!0;this.isFieldsVerified()?"not_accepted"===this.accept&&(a=this.translate("salary.apply.consent.error.not_accept")):a=this.translate("salary.apply.consent.error.not_appliable"),e(a)},nextStepValidation(t,e,a){let s=!0;if(3===t)this.isFieldsVerified(e.items)||(s=this.translate("salary.apply.consent.error.not_appliable"));a(s)}}};const ot=F(it,lt,[],!1,null,null,null).exports;var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.agreement?a("div",{staticClass:"editor-content",domProps:{innerHTML:t._s(t.agreement.terms)}}):a("PanelSpinner")]},proxy:!0}])})};ct._withStripped=!0;const ut=F({name:"PanelSalaryApplyShowTerms",props:{agreement:null}},ct,[],!1,null,null,null).exports;var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.request?a("PanelCard",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"body",fn:function(){return[a("b-row",[a("b-col",{staticClass:"mb-4",attrs:{md:"4",lg:"3"}},[a("div",{staticClass:"d-flex flex-column text-center"},[a("strong",{staticClass:"mb-3"},[t._v(t._s(t.translate("salary.column.current_status")))]),t._v(" "),t._l(t.request.statuses_stack,(function(e,s){return t.request.statuses_stack?[a("PanelCellStatus",{staticClass:"mb-3",attrs:{status:s,title:e,statuses:t.statuses,size:"xl"}})]:t._e()})),t._v(" "),a("PanelCellStatus",{attrs:{status:t.request.status,title:t.request.status_title,statuses:t.statuses,size:"xl"}})],2),t._v(" "),a("hr",{staticClass:"my-3"}),t._v(" "),a("div",{staticClass:"d-flex flex-column text-center"},[a("strong",{staticClass:"mb-3"},[t._v(t._s(t.translate("salary.column.request_date")))]),t._v(" "),a("PanelCellText",{attrs:{text:t.request.created_at}})],1)]),t._v(" "),a("b-col",{attrs:{md:"8",lg:"9"}},["awaiting_payment"===t.request.status?a("PanelNotice",{attrs:{content:t.request.description,type:"danger",classes:"my-4"}}):t._e(),t._v(" "),t.request.status_notice?a("PanelNotice",{attrs:{content:t.request.status_notice,type:t.getStatusNoticeType(t.request.status),classes:"mb-4 mt-0"}}):t._e(),t._v(" "),"accepted"===t.request.status?[a("div",{staticClass:"d-flex justify-content-center"},[a("PanelAction",{attrs:{variant:"primary","as-action":"",to:{name:"panel_salary_agreement_show",params:{id:t.agreement.id}},name:"view_agreement",text:t.translate("salary.action.view_agreement")}})],1)]:"awaiting_payment"===t.request.status?a("div",[t.fields?[a("PanelForm",{attrs:{fields:t.fields,labelAlign:"left",id:"pay_payment",data:t.data,tag:"form",offset:"4"},on:{changed:t.onChangeForm},scopedSlots:t._u([{key:"custom-field",fn:function(e){var s=e.field;return["overview"===s.id?a("PanelCard",{attrs:{has_header:!1,attrs:{container:{class:"bg-gray-200 price-segment"},body:{class:"p-5"}}},scopedSlots:t._u([{key:"body",fn:function(){return[a("strong",{staticClass:"d-block text-center mb-4"},[t._v(t._s(s.description))]),t._v(" "),a("div",{domProps:{innerHTML:t._s(s.content)}})]},proxy:!0}],null,!0)}):"instructions"===s.id?a("PanelNotice",{attrs:{type:"primary",icon:!1},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",{staticClass:"mb-4 text-center"},[t._v(t._s(s.description))]),t._v(" "),t._l(s.options,(function(e){return[a("b-row",{staticClass:"mb-2 text-center no-gutter row-paddingless"},[a("b-col",{attrs:{cols:"2"}},[t._v(t._s(e.bank))]),t._v(" "),a("b-col",{attrs:{cols:"6"}},[a("strong",[t._v(t._s(e.number))])]),t._v(" "),a("b-col",{attrs:{cols:"4"}},[t._v(t._s(e.name))])],1)]}))]},proxy:!0}],null,!0)}):t._e()]}},{key:"custom",fn:function(e){var s=e.field,n=e.props;return["coupon"===s.id?a("PanelCard",{attrs:{has_header:!1,attrs:{container:{class:"bg-gray-100"},body:{class:"p-5"}}},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"d-flex justify-content-between"},[a("PanelTextInput",{attrs:{props:Object.assign({},n,{label:!1,inline:!1,classes:{container:"mb-0 w-100 mr-2",input:"bg-gray-200"}})},on:{input:function(e){return t.coupon=e}}}),t._v(" "),a("PanelAction",{staticClass:"text-nowrap",attrs:{variant:"primary","as-action":"",light:"",name:"apply_coupon",text:t.translate("salary.action.apply_coupon")},on:{click:t.onClickApplyCoupon}})],1)]},proxy:!0}],null,!0)}):t._e()]}}],null,!1,970174476)}),t._v(" "),a("div",{staticClass:"d-flex justify-content-end"},[a("PanelAction",{attrs:{variant:"primary","as-action":"",name:"submit_payment",text:t.paymentSubmitText},on:{click:t.onSubmitPayment}})],1)]:a("PanelSpinner")],2):t._e(),t._v(" "),"awaiting_review"===t.request.status&&t.request.order?a("ul",{staticClass:"list-group list-group-flush"},t._l(t.request.order,(function(e,s){return a("li",{key:s,staticClass:"list-group-item d-flex justify-content-between"},[a("span",[t._v(t._s(e.title))]),t._v(" "),a("strong",{domProps:{innerHTML:t._s(e.value)}})])})),0):t._e(),t._v(" "),t.request.status_description?a("div",{staticClass:"editor-content mt-5",domProps:{innerHTML:t._s(t.request.status_description)}}):t._e()],2)],1)]},proxy:!0}],null,!1,3626012742)}):t._e()};dt._withStripped=!0;const mt=F({name:"PanelSalaryApplyShowStatus",data:()=>({data:{},coupon:null,fields:null,loading:!1,paymentSubmitText:""}),props:{request:null,agreement:null},beforeMount(){if("awaiting_payment"===this.request.status){this.paymentSubmitText=this.translate("salary.action.submit_payment");const t=this.$route.params.id;this.$store.dispatch(n,{agreement:t}).then((t=>{this.fields=t})).catch((()=>{this.$helper.$showModal({icon:"warning",html:this.translate("error.refresh_page")})}))}},computed:{statuses:()=>({paid:"success",pending:"secondary",rejected:"danger",accepted:"success",approved:"primary",awaiting_review:"warning",awaiting_payment:"warning"})},methods:{getStatusNoticeType(t){let e="primary";switch(t){case"accepted":e="success";break;case"rejected":e="danger"}return e},onChangeForm(t){this.data=t,"bacs"===t.method?this.paymentSubmitText=this.translate("salary.action.submit_payment"):this.paymentSubmitText=this.translate("salary.action.pay")},onSubmitPayment(){this.loading=!0,this.$helper.$runAction(a,{...this.data,request:this.request.id,coupon:this.coupon}).then((({response:t,modal:e})=>{e.then((()=>{this.$router.push({name:"panel_salary_apply_list"})}))})).finally((()=>this.loading=!1))},onClickApplyCoupon(){this.$helper.$runAction(t,{code:this.coupon,agreement:this.agreement.id},"#apply_coupon").then((({response:t,modal:e})=>{const a=PRHelper.getHTML();PRHelper.getType().each(t.data,((t,e)=>{const s=a.getElement(`.price-segment .price-item.${e}`);a.isElement(s)&&a.replace(t,s,!1)}))})).catch((()=>{this.coupon=null}))}}},dt,[],!1,null,null,null).exports;var pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.agreement?a("PanelSalaryAgreementDetails",{attrs:{agreement:t.agreement}}):t._e()]},proxy:!0}])})};pt._withStripped=!0;const ht=F({name:"PanelSalaryApplyShowDetails",props:{agreement:null}},pt,[],!1,null,null,null).exports;var _t=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};_t._withStripped=!0;const yt=F({name:"PanelSalaryAgreement"},_t,[],!1,null,null,null).exports;var wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"toolbar",fn:function(){return[a("router-link",{attrs:{to:"/salary/apply",custom:""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.href,n=e.route;e.navigate,e.isActive,e.isExactActive;return[a("a",{staticClass:"btn btn-success",attrs:{href:s}},[t._v("\n        "+t._s(n.meta.title)+"\n      ")])]}}])})]},proxy:!0},{key:"td",fn:function(t){var e=t.item,s=(t.column,t.column_key),n=t.id;return["actions"===s?a("PanelActionLink",{attrs:{name:"details",to:{name:"panel_salary_agreement_show",params:{id:n}}}}):a("PanelCellText",{attrs:{text:e[s]}})]}}])})};wt._withStripped=!0;const ft=F({name:"PanelSalaryAgreementList",computed:{remoteProps:()=>({api:"/pmpr/v1/salary/agreement/get-list-by-user","query-params":{sort:"created_at",sortBy:"orderBy"}}),columns(){return{title:{title:this.translate("column.title"),width:"35%"},accepted_at:{title:this.translate("salary.column.start_date"),width:"45%"},actions:{title:this.translate("column.actions"),width:"20%"}}}}},wt,[],!1,null,null,null).exports;var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.agreement?a("div",[a("h1",{staticClass:"mb-6"},[t._v(t._s(t.agreement.title))]),t._v(" "),a("PanelSidebar",{attrs:{tabs:t.tabs,args:{agreement:t.agreement}}})],1):a("PanelSpinner")};gt._withStripped=!0;const vt={name:"PanelSalaryAgreementShow",data:()=>({agreement:null}),beforeMount(){this.$store.dispatch(v,{agreement:this.$route.params.id}).then((t=>{PRHelper.getType().isEmpty(t)?this.$router.push({name:"panel_salary_agreement_list"}):this.agreement=t})).catch((()=>{this.$router.push({name:"panel_salary_agreement_list"})}))},computed:{tabs(){return this.$router.getRouteChildren("panel_salary_agreement_show")}}};const bt=F(vt,gt,[],!1,null,null,null).exports;var Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.agreement?a("div",{staticClass:"editor-content",domProps:{innerHTML:t._s(t.agreement.terms)}}):a("PanelSpinner")]},proxy:!0}])})};Pt._withStripped=!0;const St=F({name:"PanelSalaryAgreementShowTerms",props:{agreement:null}},Pt,[],!1,null,null,null).exports;var xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.request?a("div",[a("b-row",[a("b-col",{staticClass:"mb-4",attrs:{md:"4",lg:"3"}},[a("div",{staticClass:"d-flex flex-column text-center"},[a("strong",{staticClass:"mb-3"},[t._v(t._s(t.translate("salary.column.request_date")))]),t._v(" "),a("PanelCellText",{attrs:{text:t.request.created_at}})],1),t._v(" "),a("hr",{staticClass:"my-3"}),t._v(" "),a("div",{staticClass:"d-flex flex-column text-center"},[a("strong",{staticClass:"mb-3"},[t._v(t._s(t.translate("salary.column.start_date")))]),t._v(" "),a("PanelCellText",{attrs:{text:t.request.accepted_at}})],1)]),t._v(" "),a("b-col",{staticClass:"editor-content",attrs:{md:"8",lg:"9"},domProps:{innerHTML:t._s(t.request.cooperation_status_description)}})],1)],1):a("PanelSpinner")]},proxy:!0}])})};xt._withStripped=!0;const $t=F({name:"PanelSalaryAgreementShowStatus",props:{agreement:null},data:()=>({request:null}),beforeMount(){this.$store.dispatch(f,{agreement:this.$route.params.id}).then((t=>{this.request=t}))}},xt,[],!1,null,null,null).exports;var kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[t.agreement?a("PanelSalaryAgreementDetails",{attrs:{agreement:t.agreement}}):t._e()]},proxy:!0}])})};kt._withStripped=!0;const Ct=F({name:"PanelSalaryAgreementShowDetails",props:{agreement:null}},kt,[],!1,null,null,null).exports;var At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var s=e.item,n=(e.column,e.column_key);e.id;return["withdraw_status"===n?a("PanelCellStatus",{attrs:{title:s.withdraw_status_title,status:s.withdraw_status,statuses:t.statuses,size:"xl"}}):a("PanelCellText",{attrs:{text:s[n]}})]}}])})};At._withStripped=!0;const qt=F({name:"PanelSalaryAgreementShowIncomes",props:{agreement:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/agreement/get-incomes","query-values":{agreement:this.agreement.id},"query-params":{sort:"created_at",sortBy:"orderBy"}}},statuses:()=>({locked:"danger",withdrawn:"success",unwithdrawn:"primary",nonewithdrawnable:"gray"}),columns(){return{product:{title:this.translate("column.product"),width:"25%"},amount:{title:this.translate("salary.incomes.column.amount"),width:"25%"},withdraw_status:{title:this.translate("column.status"),width:"25%"},created_at:{title:this.translate("column.date"),width:"25%"}}}}},At,[],!1,null,null,null).exports;var Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(t){var e=t.item,s=(t.column,t.column_key);t.id;return[a("PanelCellText",{attrs:{text:e[s]}})]}}])})};Tt._withStripped=!0;const Et=F({name:"PanelSalaryAgreementShowProducts",props:{agreement:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/agreement/get-products","query-values":{agreement:this.agreement.id},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{title:{title:this.translate("column.title"),width:"40%"},incomes_count:{title:this.translate("salary.column.sale_count"),width:"30%"},incomes_sum:{title:this.translate("salary.column.your_income"),width:"30%"}}}}},Tt,[],!1,null,null,null).exports;var Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(t){var e=t.item,s=(t.column,t.column_key);t.id;return[a("PanelCellText",{attrs:{text:e[s]}})]}}])})};Mt._withStripped=!0;const Rt=F({name:"PanelSalaryAgreementShowCategories",props:{agreement:null},computed:{remoteProps(){return{api:"/pmpr/v1/salary/agreement/get-categories","query-values":{agreement:this.agreement.id},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{title:{title:this.translate("column.title"),width:"35%"},products:{title:this.translate("salary.categories.column.products"),width:"20%"},incomes_count:{title:this.translate("salary.column.sale_count"),width:"20%"},incomes_sum:{title:this.translate("salary.column.your_income"),width:"25%"}}}}},Mt,[],!1,null,null,null).exports;var Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelCollapsibleRemote",{attrs:{remote:t.remoteProps,accordion:"bank-account-list"},scopedSlots:t._u([{key:"toolbar",fn:function(){return[a("PanelModal",{attrs:{modal:t.modalProps,button:t.buttonProps,id:"bank_account_modal",loading:t.loading,title:t.translate("salary.bank_accounts.modal.title")},on:{"modal-hide":function(e){return t.onModalHide(e)},"modal-show":function(e){return t.onModalShow(e)}},scopedSlots:t._u([{key:"body",fn:function(e){var s=e.close;return[t.fields?[a("PanelNotice",{attrs:{content:t.translate("salary.bank_accounts.modal.notice"),classes:"mb-10"}}),t._v(" "),a("PanelForm",{attrs:{fields:t.fields,data:t.account,labelAlign:"left",id:"save_bank_account",tag:"form",offset:"0"},on:{changed:function(e){t.data=e},rendered:t.afterRender}}),t._v(" "),a("div",{staticClass:"text-center pt-5"},[a("PanelActionSubmit",{staticClass:"mr-5",attrs:{name:"save",form:"save_bank_account",text:t.translate("salary.bank_accounts.action.save")}}),t._v(" "),a("PanelActionCancel",{on:{click:s}})],1)]:a("PanelSpinner")]}}])})]},proxy:!0},{key:"toggle",fn:function(t){var e=t.item;return[a("PanelSalaryBankAccount",{attrs:{account:e,container:{class:"d-flex ml-3"}}})]}},{key:"actions",fn:function(e){var s=e.item;return[a("div",{staticClass:"d-flex my-3 ml-5"},[a("PanelCellStatus",{attrs:{status:s.status,title:s.status_title,classes:"my-auto",statuses:{locked:"primary",editable:"success"}}}),t._v(" "),t._l(t.actions,(function(e,n){return a("b-button",{key:n,ref:n,refInFor:!0,staticClass:"ml-2",attrs:{disabled:s.locked,"data-action":n,variant:"light",size:"sm","data-key":s.escaped},on:{click:function(e){return t.onClick(e,n,s.form)}}},[a("PanelIcon",{staticClass:"mx-0",attrs:{icon:e.icon,size:"xs",color:"primary"}})],1)}))],2)]}},{key:"content",fn:function(e){var s=e.item;return[a("b-row",{staticClass:"ml-7",attrs:{"align-h":"between"}},t._l(s.data,(function(e,s){var n=e.title,r=e.value;return a("b-col",{key:s,staticClass:"d-flex justify-content-between my-2",attrs:{md:"5"}},[a("strong",{staticClass:"text-dark-50"},[t._v(t._s(n))]),t._v(" "),a("span",{staticClass:"text-dark"},[t._v(t._s(r))])])})),1)]}}])})};Ht._withStripped=!0;const Ft={type:"iban"};const Bt=F({name:"PanelUserProfileBankAccounts",data:()=>({data:{},fields:null,loading:!1,account:Ft}),methods:{reset(){this.data=Ft},afterRender(){this.$helper.$onSubmitForm("save_bank_account",this.fields,(()=>{this.loading=!0;let t=this.data;this.$helper.$isFormChanged(t,this.account)?(this.account&&(t={...t,id:this.account.id}),this.$helper.$saveForm(t,q).then((()=>{this.$hook.fire("modal:hide","bank_account_modal"),this.$hook.fire("remote-list:refresh")})).finally((()=>{this.loading=!1}))):this.loading=!1}))},onModalHide(t){this.reset()},onModalShow(t){this.$store.dispatch(C).then((t=>{this.fields=t}))},onClick(t,e,a){switch(e){case"edit":this.data=a,this.account=a,this.$hook.fire("modal:show","bank_account_modal");break;case"remove":this.$helper.$showModal({icon:"warning",html:this.translate("salary.bank_accounts.action.remove.description"),showDenyButton:!0,confirmButtonText:this.translate("salary.bank_accounts.action.remove.title"),showLoaderOnConfirm:!0,preConfirm:()=>this.$helper.$runAction(A,{id:a.id}).then((({modal:t})=>{this.$hook.fire("remote-list:refresh")}))})}}},computed:{actions(){return{edit:{icon:"fasm/6/set/pencil",title:this.translate("salary.bank_accounts.action.edit.title")},remove:{icon:"fasm/6/set/trash",title:this.translate("salary.bank_accounts.action.remove.title")}}},modalProps:()=>({size:"lg",centered:!0,"hide-footer":!0,"body-class":"mx-5 mx-xl-15 my-7"}),buttonProps(){return{title:this.translate("salary.bank_accounts.action.add"),variant:"success"}},remoteProps:()=>({api:"/pmpr/v1/salary/bank-account/get-list"})}},Ht,[],!1,null,null,null).exports;window.PanelSalary=j,window.PanelSalaryWithdraw=I,window.PanelSalaryWithdrawList=V,window.PanelSalaryWithdrawShow=G,window.PanelSalaryWithdrawShowIncomes=K,window.PanelSalaryWithdrawShowPayments=Y,window.PanelSalaryApply=tt,window.PanelSalaryApplyList=at,window.PanelSalaryApplyShow=rt,window.PanelSalaryApplySubmit=ot,window.PanelSalaryApplyShowTerms=ut,window.PanelSalaryApplyShowStatus=mt,window.PanelSalaryApplyShowDetails=ht,window.PanelSalaryAgreement=yt,window.PanelSalaryAgreementList=ft,window.PanelSalaryAgreementShow=bt,window.PanelSalaryAgreementShowTerms=St,window.PanelSalaryAgreementShowStatus=$t,window.PanelSalaryAgreementShowDetails=Ct,window.PanelSalaryAgreementShowIncomes=qt,window.PanelSalaryAgreementShowProducts=Et,window.PanelSalaryAgreementShowCategories=Rt,window.PanelUserProfileBankAccounts=Bt})();